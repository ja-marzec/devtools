---
const schedule = [
  {
    title: "DOM, CSS & UX Audit",
    description:
      "Opanowanie paneli Elements, paru sposobów na edycję CSS oraz audyt UX pod kątem dostępności i wydajności.",
    icon: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",
    done: true,
  },
  {
    title: "JavaScript Sources Mastery",
    description:
      "Debugger, Breakpoints, Console, Sources. Jak przejąć kontrolę nad stanem aplikacji i wycignąć z niej maksimum informacji.",
    icon: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",
    done: true,
  },
  {
    title: "Network & Performance",
    description:
      "Analiza Waterfall, symulacja lagów, Web Vitals i Memory Leaks. Rozwiązywanie problemów, z wydajnością i mockowanie danych.",
    icon: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",
    done: true,
  },
  {
    title: "Case Studies & Q&A",
    description:
      "Wspólna analiza problemów z Waszych projektów. Praktyczne porady i zamknięcie szkolenia.",
    icon: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",
    done: true,
  },
];
---

<section id="program" class="py-24 bg-base-100 overflow-hidden">
  <div class="max-w-4xl mx-auto px-6">
    <div class="flex flex-col items-center mb-16 animate-on-scroll">
      <h2
        class="text-4xl md:text-5xl font-black text-center tracking-tighter mb-4"
      >
        Program Szkolenia
      </h2>
      <div class="h-1.5 w-20 bg-primary rounded-full"></div>
    </div>

    <ul
      class="timeline timeline-snap-icon max-md:timeline-compact timeline-vertical"
    >
      {
        schedule.map((item, index) => (
          <li class="animate-on-scroll">
            {index !== 0 && <hr class={item.done ? "bg-primary" : ""} />}

            <div class="timeline-middle">
              <div
                class={`p-1 rounded-full ${item.done ? "text-primary" : "opacity-30"}`}
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  class="h-6 w-6"
                >
                  <path fill-rule="evenodd" d={item.icon} clip-rule="evenodd" />
                </svg>
              </div>
            </div>

            <div
              class={`${index % 2 === 0 ? "timeline-start md:text-end" : "timeline-end"} mb-12 mt-0`}
            >
              <div class="text-xs font-bold tracking-widest uppercase opacity-40 mb-1">
                Moduł 0{index + 1}
              </div>
              <div class="text-2xl font-black text-base-content mb-2 italic tracking-tight">
                {item.title}
              </div>
              <p class="text-base-content/70 leading-relaxed max-w-md mx-auto md:mx-0">
                {item.description}
              </p>
            </div>

            {index !== schedule.length - 1 && (
              <hr class={item.done ? "bg-primary" : ""} />
            )}
          </li>
        ))
      }
    </ul>
  </div>
</section>

<style>
  /* Stan bazowy dla animacji */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Stan po aktywacji */
  .animate-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Animacja dla linii (hr) - opcjonalna, ale dodaje płynności */
  .animate-on-scroll hr {
    transform-origin: top;
    transform: scaleY(0);
    transition: transform 1s ease-out 0.3s;
  }

  .animate-on-scroll.is-visible hr {
    transform: scaleY(1);
  }
</style>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px", // Aktywuje chwilę zanim element wejdzie w pełny widok
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("is-visible");
      }
    });
  }, observerOptions);

  document.addEventListener("DOMContentLoaded", () => {
    const animatedElements = document.querySelectorAll(".animate-on-scroll");
    animatedElements.forEach((el) => observer.observe(el));
  });
</script>
